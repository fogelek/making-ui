<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ metadata.title }}</title>
    <link rel="stylesheet" href="{{ '/css/reset.css' | url }}"/>
    <link rel="stylesheet" href="{{ '/css/style.css' | url }}"/>
    {% if stylesheet %}
        <link rel="stylesheet" href="{{ '/css/content/' + stylesheet + '.css' | url}}"/>
    {% endif %}
    <script type="text/javascript">
        if ('paintWorklet' in CSS){
            CSS.paintWorklet.addModule("/js/gradientee-worklet.js");
        }
    </script>
    <script type="text/javascript" src="/js/gradientee.js"></script>
</head>
<body>
    <div class="bg-container">
        <canvas></canvas>
    </div>
    {% if title %}
        {% include "partials/post.njk" %}
    {% else %}
        {% include "partials/main.njk" %}
    {% endif %}
    <script>
     class ArticleBox extends HTMLElement {
        constructor() {
            super();
            const article = document.createElement('article');
            while (this.children.length > 0) {
                article.appendChild(this.children[0]);
            }

            this.append(article);
            const box = document.createElement('div');
            box.classList.add('box');
            if (this.hasAttribute('animate')) {
                box.classList.add('animate');
            }
            this.append(box);
        }
    }

    customElements.define('article-box', ArticleBox);
</script>
    <script type="text/javascript" src="/js/main.js"></script>
</body>
</html>